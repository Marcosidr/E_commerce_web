# ๐๏ธ Diagrama de Relacionamentos - URBANSTREET Database

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   CATEGORIES    โ    โ    PRODUCTS     โ    โ      CART       โ
โโโโโโโโโโโโโโโโโโโค    โโโโโโโโโโโโโโโโโโโค    โโโโโโโโโโโโโโโโโโโค
โ โข id (PK)       โโโโโโ โข id (PK)       โโโโโโ โข id (PK)       โ
โ โข name          โ   โโ โข name          โ   โโ โข user_id (FK)  โ
โ โข slug          โ   โโ โข slug          โ   โโ โข session_id    โ
โ โข description   โ   โโ โข price         โ   โโ โข product_id(FK)โ
โ โข active        โ   โโ โข category_id(FK)โ   โโ โข quantity      โ
โ โข created_at    โ   โโ โข brand         โ   โโ โข size          โ
โโโโโโโโโโโโโโโโโโโ   โโ โข featured      โ   โโโโโโโโโโโโโโโโโโโโ
                      โโ โข active        โ   โ         โฒ
                      โโโโโโโโโโโโโโโโโโโโ   โ         โ
                      โ                      โ         โ
โโโโโโโโโโโโโโโโโโโ   โ                      โ         โ
โ     USERS       โ   โ                      โ         โ
โโโโโโโโโโโโโโโโโโโค   โ                      โ         โ
โ โข id (PK)       โโโโโผโโโโโโโโโโโโโโโโโโโโโโโ         โ
โ โข name          โ   โ                                โ
โ โข email         โ   โ                                โ
โ โข password      โ   โ                                โ
โ โข role          โ   โโโโโโโโโโโโโโโโโโโโ             โ
โ โข active        โ   โโ   ADDRESSES     โ             โ
โ โข created_at    โ   โโ โโโโโโโโโโโโโโโโโโโค             โ
โโโโโโโโโโโโโโโโโโโ   โโ โข id (PK)       โ             โ
         โ            โโ โข user_id (FK)  โโโโโโโโโโโโโโโ
         โ            โโ โข type          โ
         โ            โโ โข street        โ
         โ            โโ โข city          โ
         โ            โโ โข state         โ
         โ            โโโโโโโโโโโโโโโโโโโโ
         โ            โ
         โ            โโโโโโโโโโโโโโโโโโโโ
         โ            โโ     ORDERS      โ
         โ            โโโโโโโโโโโโโโโโโโโโค
         โ            โโ โข id (PK)       โ
         โ            โโ โข user_id (FK)  โโโโโโโโโโโโโโโโ
         โ            โโ โข order_number  โ              โ
         โ            โโ โข status        โ              โ
         โ            โโ โข total_amount  โ              โ
         โ            โโ โข payment_statusโ              โ
         โ            โโโโโโโโโโโโโโโโโโโโ              โ
         โ            โ         โ                       โ
         โ            โ         โ                       โ
         โ            โ         โผ                       โ
         โ            โโโโโโโโโโโโโโโโโโโโ              โ
         โ            โโ  ORDER_ITEMS    โ              โ
         โ            โโโโโโโโโโโโโโโโโโโโค              โ
         โ            โโ โข id (PK)       โ              โ
         โ            โโ โข order_id (FK) โโโโโโโโโโโโโโโโ
         โ            โโ โข product_id(FK)โโโโโโโโโโโโโโโโ
         โ            โโ โข quantity      โ              โ
         โ            โโ โข price         โ              โ
         โโโโโโโโโโโโโโผโค โข total         โ              โ
                      โโโโโโโโโโโโโโโโโโโโ              โ
                      โ                                 โ
                      โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   NEWSLETTER    โ    โ    CONTACTS     โ
โโโโโโโโโโโโโโโโโโโค    โโโโโโโโโโโโโโโโโโโค
โ โข id (PK)       โ    โ โข id (PK)       โ
โ โข email         โ    โ โข name          โ
โ โข name          โ    โ โข email         โ
โ โข status        โ    โ โข subject       โ
โ โข subscribed_at โ    โ โข message       โ
โโโโโโโโโโโโโโโโโโโ    โ โข status        โ
                       โโโโโโโโโโโโโโโโโโโ

LEGENDAS:
โโโ  Relacionamento 1:N (One-to-Many)
โโโบ  Chave Estrangeira (Foreign Key)
PK   Chave Primรกria (Primary Key)  
FK   Chave Estrangeira (Foreign Key)
```

## ๐ Cardinalidades

| Relacionamento | Tipo | Descriรงรฃo |
|----------------|------|-----------|
| users โ addresses | 1:N | Um usuรกrio pode ter vรกrios endereรงos |
| users โ cart | 1:N | Um usuรกrio pode ter vรกrios itens no carrinho |
| users โ orders | 1:N | Um usuรกrio pode fazer vรกrios pedidos |
| categories โ products | 1:N | Uma categoria pode ter vรกrios produtos |
| products โ cart | 1:N | Um produto pode estar em vรกrios carrinhos |
| products โ order_items | 1:N | Um produto pode estar em vรกrios pedidos |
| orders โ order_items | 1:N | Um pedido pode ter vรกrios itens |

## ๐ Integridade Referencial

### ON DELETE CASCADE:
- `addresses.user_id` โ Se usuรกrio for deletado, endereรงos sรฃo removidos
- `cart.user_id` โ Se usuรกrio for deletado, carrinho รฉ limpo
- `orders.user_id` โ Se usuรกrio for deletado, pedidos sรฃo removidos
- `order_items.order_id` โ Se pedido for deletado, itens sรฃo removidos

### ON DELETE SET NULL:
- `products.category_id` โ Se categoria for deletada, produtos ficam sem categoria

---
**Diagrama atualizado em:** 5 de outubro de 2025